(()=>{"use strict";var e,r={495(){const e=window.wp.hooks,r=window.wp.compose,a=window.wp.blockEditor,t=window.wp.components,o=window.wp.i18n,l=window.wp.element,n=window.ReactJSXRuntime;!function(){let e=[],r=!1,a=null,t=null,o=null;function l(){if(!a)return void(r=!1);const t=a.innerHeight;e.forEach(e=>{const r=e.container.getBoundingClientRect();if(r.bottom<0||r.top>t)return;const a=(t-r.top)/(t+r.height),o=(Math.max(0,Math.min(1,a))-.5)*(.15*r.height)*.5*2;e.background.style.transform=`translateY(${o}px)`}),r=!1}function n(){r||(requestAnimationFrame(l),r=!0)}function c(){if(!t)return;const r=t.querySelectorAll(".wp-block-cover.has-parallax-scroll");e=[],r.forEach(r=>{const a=function(e){return e.querySelector(".wp-block-cover__image-background")||e.querySelector(".wp-block-cover__video-background")||e.querySelector(".wp-block-cover__background")||e.querySelector("img")||e.querySelector("video")}(r);a&&e.push({container:r,background:a})}),e.length>0&&l()}function s(){const e=document.querySelector('iframe[name="editor-canvas"]');if(!e)return void setTimeout(s,500);const r=()=>{(function(e){try{return a=e.contentWindow,t=e.contentDocument||a?.document,!(!t||!t.body||(a.addEventListener("scroll",n,{passive:!0}),o&&o.disconnect(),o=new MutationObserver(()=>{c()}),o.observe(t.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class"]}),c(),0))}catch(e){return console.warn("Parallax: Could not access iframe",e),!1}})(e)||setTimeout(r,200)};"complete"===e.contentDocument?.readyState?r():e.addEventListener("load",r)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",s):s()}(),(0,e.addFilter)("blocks.registerBlockType","cover-parallax-style/add-attribute",function(e,r){return"core/cover"!==r?e:{...e,attributes:{...e.attributes,hasParallaxScroll:{type:"boolean",default:!1}}}});const c=(0,r.createHigherOrderComponent)(e=>r=>{if("core/cover"!==r.name)return(0,n.jsx)(e,{...r});const{attributes:c,setAttributes:s}=r,{hasParallaxScroll:i,hasParallax:u}=c,d=(0,l.useRef)(u);return(0,l.useEffect)(()=>{u&&!d.current&&i&&s({hasParallaxScroll:!1}),d.current=u},[u,i,s]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e,{...r}),(0,n.jsx)(a.InspectorControls,{group:"settings",children:(0,n.jsx)(t.PanelBody,{children:(0,n.jsx)(t.ToggleControl,{__nextHasNoMarginBottom:!0,label:(0,o.__)("Parallax background","cover-parallax-style"),checked:!!i,onChange:e=>{s(e&&u?{hasParallaxScroll:e,hasParallax:!1}:{hasParallaxScroll:e})},help:(0,o.__)("Background scrolls at a different speed than content.","cover-parallax-style")})})})]})},"withParallaxControl");(0,e.addFilter)("editor.BlockEdit","cover-parallax-style/with-parallax-control",c),(0,e.addFilter)("blocks.getSaveContent.extraProps","cover-parallax-style/add-parallax-class-save",function(e,r,a){return"core/cover"!==r.name?e:a.hasParallaxScroll?{...e,className:e.className?`${e.className} has-parallax-scroll`:"has-parallax-scroll"}:e});const s=(0,r.createHigherOrderComponent)(e=>r=>{if("core/cover"!==r.name)return(0,n.jsx)(e,{...r});const{attributes:a}=r;if(a.hasParallaxScroll){const a=r.className?`${r.className} has-parallax-scroll`:"has-parallax-scroll";return(0,n.jsx)(e,{...r,className:a})}return(0,n.jsx)(e,{...r})},"withParallaxClassInEditor");(0,e.addFilter)("editor.BlockListBlock","cover-parallax-style/add-parallax-class-editor",s)}},a={};function t(e){var o=a[e];if(void 0!==o)return o.exports;var l=a[e]={exports:{}};return r[e](l,l.exports,t),l.exports}t.m=r,e=[],t.O=(r,a,o,l)=>{if(!a){var n=1/0;for(u=0;u<e.length;u++){for(var[a,o,l]=e[u],c=!0,s=0;s<a.length;s++)(!1&l||n>=l)&&Object.keys(t.O).every(e=>t.O[e](a[s]))?a.splice(s--,1):(c=!1,l<n&&(n=l));if(c){e.splice(u--,1);var i=o();void 0!==i&&(r=i)}}return r}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[a,o,l]},t.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),(()=>{var e={57:0,350:0};t.O.j=r=>0===e[r];var r=(r,a)=>{var o,l,[n,c,s]=a,i=0;if(n.some(r=>0!==e[r])){for(o in c)t.o(c,o)&&(t.m[o]=c[o]);if(s)var u=s(t)}for(r&&r(a);i<n.length;i++)l=n[i],t.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return t.O(u)},a=globalThis.webpackChunkcover_parallax_style=globalThis.webpackChunkcover_parallax_style||[];a.forEach(r.bind(null,0)),a.push=r.bind(null,a.push.bind(a))})();var o=t.O(void 0,[350],()=>t(495));o=t.O(o)})();