(()=>{"use strict";var e,a={101(){const e=window.wp.hooks,a=window.wp.compose,r=window.wp.blockEditor,t=window.wp.components,l=window.wp.i18n,o=window.wp.element,n=window.wp.primitives,s=window.ReactJSXRuntime;var c=(0,s.jsxs)(n.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[(0,s.jsx)(n.Path,{d:"m19 7.5h-7.628c-.3089-.87389-1.1423-1.5-2.122-1.5-.97966 0-1.81309.62611-2.12197 1.5h-2.12803v1.5h2.12803c.30888.87389 1.14231 1.5 2.12197 1.5.9797 0 1.8131-.62611 2.122-1.5h7.628z"}),(0,s.jsx)(n.Path,{d:"m19 15h-2.128c-.3089-.8739-1.1423-1.5-2.122-1.5s-1.8131.6261-2.122 1.5h-7.628v1.5h7.628c.3089.8739 1.1423 1.5 2.122 1.5s1.8131-.6261 2.122-1.5h2.128z"})]});const i=[.3,.475,.65,.825,1],d=.3;function p(e){return i[e-1]||d}function u(e){let a=0,r=Math.abs(i[0]-e);return i.forEach((t,l)=>{const o=Math.abs(t-e);o<r&&(r=o,a=l)}),a+1}function x(e){return i.some(a=>Math.abs(a-e)<.01)}!function(){let e=[],a=!1,r=null,t=null,l=null;function o(){if(!r)return void(a=!1);const t=r.innerHeight;e.forEach(e=>{const a=e.container.getBoundingClientRect();if(a.bottom<0||a.top>t)return;const r=(t-a.top)/(t+a.height),l=(Math.max(0,Math.min(1,r))-.5)*(.15*a.height)*e.speed*2;e.background.style.transform=`translateY(${l}px)`}),a=!1}function n(){a||(requestAnimationFrame(o),a=!0)}function s(){if(!t)return;const a=t.querySelectorAll(".wp-block-cover.has-parallax-scroll");e=[],a.forEach(a=>{const r=function(e){return e.querySelector(".wp-block-cover__image-background")||e.querySelector(".wp-block-cover__video-background")||e.querySelector(".wp-block-cover__background")||e.querySelector("img")||e.querySelector("video")}(a);if(r){const t=parseFloat(a.dataset.parallaxSpeed||d);e.push({container:a,background:r,speed:t})}}),e.length>0&&o()}function c(){const e=document.querySelector('iframe[name="editor-canvas"]');if(!e)return void setTimeout(c,500);const a=()=>{(function(e){try{return r=e.contentWindow,t=e.contentDocument||r?.document,!(!t||!t.body||(r.addEventListener("scroll",n,{passive:!0}),l&&l.disconnect(),l=new MutationObserver(()=>{s()}),l.observe(t.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","data-parallax-speed"]}),s(),0))}catch(e){return console.warn("Parallax: Could not access iframe",e),!1}})(e)||setTimeout(a,200)};"complete"===e.contentDocument?.readyState?a():e.addEventListener("load",a)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",c):c()}(),(0,e.addFilter)("blocks.registerBlockType","cover-parallax-style/add-attribute",function(e,a){return"core/cover"!==a?e:{...e,attributes:{...e.attributes,hasParallaxScroll:{type:"boolean",default:!1},parallaxSpeed:{type:"number",default:d}}}});const h=(0,a.createHigherOrderComponent)(e=>a=>{if("core/cover"!==a.name)return(0,s.jsx)(e,{...a});const{attributes:n,setAttributes:i}=a,{hasParallaxScroll:h,hasParallax:v,parallaxSpeed:m=d}=n,f=(0,o.useRef)(v),[b,w]=(0,o.useState)(()=>!x(m));(0,o.useEffect)(()=>{v&&!f.current&&h&&i({hasParallaxScroll:!1}),f.current=v},[v,h,i]),(0,o.useEffect)(()=>{b||x(m)||w(!0)},[m,b]);const g=u(m);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e,{...a}),(0,s.jsx)(r.InspectorControls,{group:"settings",children:(0,s.jsxs)(t.PanelBody,{children:[(0,s.jsx)(t.ToggleControl,{__nextHasNoMarginBottom:!0,label:(0,l.__)("Parallax background","cover-parallax-style"),checked:!!h,onChange:e=>{i(e&&v?{hasParallaxScroll:e,hasParallax:!1}:{hasParallaxScroll:e})},help:(0,l.__)("Background scrolls at a different speed than content.","cover-parallax-style")}),h&&(0,s.jsxs)("div",{className:"parallax-speed-control",children:[(0,s.jsxs)(t.__experimentalHStack,{children:[(0,s.jsx)(t.FlexBlock,{children:(0,s.jsx)("span",{className:"parallax-speed-control__label",children:(0,l.__)("Speed","cover-parallax-style")})}),(0,s.jsx)(t.FlexItem,{children:(0,s.jsx)(t.Button,{icon:c,size:"small",variant:b?"primary":"tertiary",onClick:()=>{if(b){const e=u(m);i({parallaxSpeed:p(e)})}w(!b)},label:b?(0,l.__)("Use size preset","cover-parallax-style"):(0,l.__)("Set custom value","cover-parallax-style"),isPressed:b})})]}),b?(0,s.jsx)(t.RangeControl,{__nextHasNoMarginBottom:!0,value:m,onChange:e=>{i({parallaxSpeed:e})},min:.1,max:1,step:.05,withInputField:!0}):(0,s.jsx)(t.RangeControl,{__nextHasNoMarginBottom:!0,value:g,onChange:e=>{const a=p(e);i({parallaxSpeed:a})},min:1,max:5,marks:[{value:1,label:""},{value:2,label:""},{value:3,label:""},{value:4,label:""},{value:5,label:""}],step:1,withInputField:!1})]})]})})]})},"withParallaxControl");(0,e.addFilter)("editor.BlockEdit","cover-parallax-style/with-parallax-control",h),(0,e.addFilter)("blocks.getSaveContent.extraProps","cover-parallax-style/add-parallax-props-save",function(e,a,r){if("core/cover"!==a.name)return e;if(r.hasParallaxScroll){const a=r.parallaxSpeed||d;return{...e,className:e.className?`${e.className} has-parallax-scroll`:"has-parallax-scroll","data-parallax-speed":a}}return e});const v=(0,a.createHigherOrderComponent)(e=>a=>{if("core/cover"!==a.name)return(0,s.jsx)(e,{...a});const{attributes:r}=a;if(r.hasParallaxScroll){const t=r.parallaxSpeed||d,l=a.className?`${a.className} has-parallax-scroll`:"has-parallax-scroll";return(0,s.jsx)(e,{...a,className:l,wrapperProps:{...a.wrapperProps,"data-parallax-speed":t}})}return(0,s.jsx)(e,{...a})},"withParallaxPropsInEditor");(0,e.addFilter)("editor.BlockListBlock","cover-parallax-style/add-parallax-props-editor",v)}},r={};function t(e){var l=r[e];if(void 0!==l)return l.exports;var o=r[e]={exports:{}};return a[e](o,o.exports,t),o.exports}t.m=a,e=[],t.O=(a,r,l,o)=>{if(!r){var n=1/0;for(d=0;d<e.length;d++){for(var[r,l,o]=e[d],s=!0,c=0;c<r.length;c++)(!1&o||n>=o)&&Object.keys(t.O).every(e=>t.O[e](r[c]))?r.splice(c--,1):(s=!1,o<n&&(n=o));if(s){e.splice(d--,1);var i=l();void 0!==i&&(a=i)}}return a}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[r,l,o]},t.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),(()=>{var e={57:0,350:0};t.O.j=a=>0===e[a];var a=(a,r)=>{var l,o,[n,s,c]=r,i=0;if(n.some(a=>0!==e[a])){for(l in s)t.o(s,l)&&(t.m[l]=s[l]);if(c)var d=c(t)}for(a&&a(r);i<n.length;i++)o=n[i],t.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return t.O(d)},r=globalThis.webpackChunkcover_parallax_style=globalThis.webpackChunkcover_parallax_style||[];r.forEach(a.bind(null,0)),r.push=a.bind(null,r.push.bind(r))})();var l=t.O(void 0,[350],()=>t(101));l=t.O(l)})();